{% extends 'template.html.twig' %}

{% block title %}{{ restaurant.Name }}{% endblock %}

{% block stylesheets %} 
 <link rel="stylesheet" type="text/css" href="{{ asset('templates/details.css') }}" />

{% endblock %}

{% block body %}
<section class="details">
    <div class="container">  
           <div class="details__row">  
               <div class="details__left">  
                   <div class=" details__text col">  
                           <h2 class="details__header">  
                            {{ restaurant.Name }}
                           </h2>  
                    
                           <div class=" details__desc">  
                                {{ restaurant.description }}
                           </div>  
                    
                           <div class=" details__buttons">  
                            <div class="rate rate-static">
                                {% set restaurantGradeRound = restaurant.grade|round %}
                                {% if ((5-restaurantGradeRound) != 0) %}
                                {% for grade in range(1, (5 - restaurantGradeRound)) %}
                                <input type="checkbox" id={{ "star" ~ (loop.index + restaurantGradeRound) }} name="rate" value={{ (loop.index + restaurantGradeRound) }} onclick="return false" />
                                <label for={{ "star" ~ (loop.index + restaurantGradeRound) }} title="text">{{ (loop.index + restaurantGradeRound) }} stars</label>
                                {% endfor %}
                                {% endif %}                                

                                {% if (restaurantGradeRound != 0) %}
                                {% for grade in range(1, restaurantGradeRound) %}
                                <input type="checkbox" id={{ "star" ~ loop.index }} name="rate" value={{ loop.index }} checked onclick="return false" />
                                <label for={{ "star" ~ loop.index }} title="text">{{ loop.index }} stars</label>
                                {% endfor %}
                                {% endif %}
                                <div> {{ "(" ~ restaurant.grade ~ ")" }} </div>
                                 <div> {{ "(" ~ restaurant.town ~ ")" }} </div>

                            </div>
                           </div> 
                   </div>  
               </div>  
               {% set imagePath = "background-image:url('" ~ asset(restaurant.ImgPath) ~ "')"  %}
           <div class="details__background" style={{ imagePath }}>  
           </div>  

           </div>  
        </div>
</section>

    <section class="rates">
        <div class="container ">  
            <div class="rate__header detail--header"><h2>Oceń restaurację</h2></div>
            <form action={{ "/restaurant/rate/" ~ restaurant.id}} method="POST" class="rates__form">   
                 <div class="rate">
                    <input type="radio" id="star5_" name="rate" value="5" required/>
                    <label for="star5_" title="text">5 stars</label>
                    <input type="radio" id="star4_" name="rate" value="4" required/>
                    <label for="star4_" title="text">4 stars</label>
                    <input type="radio" id="star3_" name="rate" value="3" required/>
                    <label for="star3_" title="text">3 stars</label>
                    <input type="radio" id="star2_" name="rate" value="2" required/>
                    <label for="star2_" title="text">2 stars</label>
                    <input type="radio" id="star1_" name="rate" value="1" required/>
                    <label for="star1_" title="text">1 star</label>
                </div>
                <textarea minlength="10" class="rates__textarea" name="comment" required ></textarea>
                <div class="rates__button">
                    <input class=" btn" type="submit" value="Wyślij">
                </div>
                <div class="error_form">{% if error is defined %}{{ error }} {% endif %}</div>   
            </form>  
        </div>  
    </section>  


<section class="comments">
    <div class="container ">  
        <div class="comments__header"><h2>Komentarze</h2></div>
        <div class=" comments__container "> 

        {% for comment in restaurant.comments %} 
            <div class=" comment__content">  
            {{ comment.comment }}
            </div>   
        {% endfor %}
        
        </div>  
    </section>  


</div>
{% endblock %}